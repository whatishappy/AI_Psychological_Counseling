<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿ƒç†æµ‹è¯• - å¿ƒçµä¼´ä¾£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* å¯¼èˆªæ  */
        header {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #6a67ce;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: #555;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #6a67ce;
        }

        .cta-button {
            background: #6a67ce;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.3s;
        }

        .cta-button:hover {
            background: #5a57c5;
        }

        /* ç”¨æˆ·ä¿¡æ¯æŒ‰é’® */
        .user-info {
            display: none;
            position: relative;
        }

        .user-button {
            background: #6a67ce;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-menu {
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 15px;
            width: 200px;
            display: none;
            z-index: 1001;
        }

        .user-menu.show {
            display: block;
        }
        
        .user-menu p {
            margin: 0 0 10px 0;
            font-weight: 500;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .user-menu button {
            display: block;
            width: 100%;
            padding: 10px;
            background: #f5f5f5;
            border: none;
            border-radius: 5px;
            text-align: left;
            cursor: pointer;
            margin-bottom: 5px;
            transition: background 0.3s;
        }
        
        .user-menu button:hover {
            background: #e0e0e0;
        }

        /* ç™»å½•/æ³¨å†ŒæŒ‰é’® */
        .auth-button {
            background: transparent;
            color: #6a67ce;
            border: 2px solid #6a67ce;
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            margin-left: 15px;
        }

        .auth-button:hover {
            background: #f0f0ff;
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            padding: 120px 0 50px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-header h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 15px;
        }

        .page-header p {
            font-size: 1.2rem;
            color: #666;
            max-width: 700px;
            margin: 0 auto;
        }

        /* æµ‹è¯•ä»‹ç» */
        .introduction {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            padding: 40px;
            margin-bottom: 40px;
        }

        .introduction h2 {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 20px;
        }

        .introduction p {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        /* æµ‹è¯•åˆ—è¡¨ */
        .tests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .test-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            padding: 30px;
            transition: transform 0.3s;
        }

        .test-card:hover {
            transform: translateY(-10px);
        }

        .test-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #6a67ce;
        }

        .test-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #333;
        }

        .test-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .test-meta {
            display: flex;
            justify-content: space-between;
            color: #999;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .start-test-button {
            background: #6a67ce;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
            width: 100%;
        }

        .start-test-button:hover {
            background: #5a57c5;
        }

        /* æµ‹è¯•ç•Œé¢ */
        .test-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            padding: 40px;
            margin-bottom: 40px;
            display: none;
        }

        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .test-header h2 {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 10px;
        }

        .question-progress {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 20px;
            color: #333;
        }

        .options-container {
            display: grid;
            gap: 15px;
        }

        .option {
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            border-color: #6a67ce;
            background: #f9f9ff;
        }

        .option.selected {
            border-color: #6a67ce;
            background: #f0f0ff;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-button {
            background: #f0f0f0;
            color: #333;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-button:hover {
            background: #e0e0e0;
        }

        .nav-button.next {
            background: #6a67ce;
            color: white;
        }

        .nav-button.next:hover {
            background: #5a57c5;
        }

        /* ç»“æœç•Œé¢ */
        .results-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            padding: 40px;
            text-align: center;
            display: none;
        }

        .results-header {
            margin-bottom: 30px;
        }

        .results-header h2 {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 10px;
        }

        .score {
            font-size: 4rem;
            font-weight: 300;
            color: #6a67ce;
            margin: 30px 0;
        }

        .interpretation {
            text-align: left;
            background: #f9f9ff;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .interpretation h3 {
            color: #6a67ce;
            margin-bottom: 15px;
        }

        .interpretation p {
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .recommendations {
            text-align: left;
            margin-top: 30px;
        }

        .recommendations h3 {
            color: #6a67ce;
            margin-bottom: 15px;
        }

        .recommendations ul {
            padding-left: 20px;
        }

        .recommendations li {
            margin-bottom: 10px;
        }

        /* åº•éƒ¨ */
        footer {
            background: #333;
            color: white;
            padding: 50px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            color: #6a67ce;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column ul li a:hover {
            color: #6a67ce;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #aaa;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .introduction, .test-container, .results-container {
                padding: 20px;
            }
            
            .tests-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">å¿ƒçµä¼´ä¾£</div>
                <ul class="nav-links">
                    <li><a href="index.html">é¦–é¡µ</a></li>
                    <li><a href="index.html#features">åŠŸèƒ½</a></li>
                    <li><a href="index.html#testimonials">ç”¨æˆ·è¯„ä»·</a></li>
                    <li><a href="index.html#contact">è”ç³»æˆ‘ä»¬</a></li>
                </ul>
                <div class="user-info" id="user-info">
                    <button class="user-button" id="user-button">U</button>
                    <div class="user-menu" id="user-menu">
                        <p>ç”¨æˆ·èœå•</p>
                        <div id="user-profile-info">
                            <p>ç”¨æˆ·å: <span id="user-name"></span></p>
                            <p>æ˜µç§°: <span id="profile-nickname"></span></p>
                            <p>æ€§åˆ«:<span id="profile-gender"></span><span id="profile-zodiac"></span></p>
                        </div>
                        <button id="profile-btn">ä¸ªäººä¿¡æ¯</button>
                        <button id="logout-btn">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
                <button class="auth-button" id="auth-button" style="display: none;">ç™»å½•/æ³¨å†Œ</button>
                <button class="cta-button" onclick="goToChat()">å¼€å§‹èŠå¤©</button>
            </nav>
        </div>
    </header>

    <!-- ä¸»è¦å†…å®¹ -->
    <section class="main-content">
        <div class="container">
            <div class="page-header">
                <h1>å¿ƒç†æµ‹è¯•</h1>
                <p>ä¸“ä¸šçš„å¿ƒç†è¯„ä¼°å·¥å…·ï¼Œå¸®åŠ©æ‚¨æ›´å¥½åœ°äº†è§£è‡ªå·±çš„å¿ƒç†çŠ¶æ€</p>
            </div>

            <!-- æµ‹è¯•ä»‹ç» -->
            <div class="introduction">
                <h2>äº†è§£è‡ªå·±ï¼Œä»å¿ƒç†æµ‹è¯•å¼€å§‹</h2>
                <p>å¿ƒç†æµ‹è¯•æ˜¯äº†è§£è‡ªå·±å¿ƒç†çŠ¶æ€ã€æ€§æ ¼ç‰¹å¾å’Œæƒ…ç»ªå€¾å‘çš„æœ‰æ•ˆå·¥å…·ã€‚æˆ‘ä»¬çš„ä¸“ä¸šå¿ƒç†æµ‹è¯•åŸºäºå¿ƒç†å­¦ç ”ç©¶å’Œä¸´åºŠå®è·µï¼Œä¸ºæ‚¨æä¾›ç§‘å­¦ã€å‡†ç¡®çš„è¯„ä¼°ç»“æœã€‚</p>
                <p>æ‰€æœ‰æµ‹è¯•å‡ä¿æŠ¤æ‚¨çš„éšç§ï¼Œç»“æœä»…ä¾›æ‚¨ä¸ªäººå‚è€ƒã€‚å¦‚æœæ‚¨å¯¹æµ‹è¯•ç»“æœæœ‰ç–‘é—®æˆ–éœ€è¦ä¸“ä¸šå»ºè®®ï¼Œå»ºè®®å’¨è¯¢ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆã€‚</p>
            </div>

            <!-- æµ‹è¯•åˆ—è¡¨ -->
            <div class="tests-grid">
                <div class="test-card">
                    <div class="test-icon">ğŸ˜¢</div>
                    <h3>æŠ‘éƒè‡ªè¯„é‡è¡¨(SDS)</h3>
                    <p>è¯„ä¼°æŠ‘éƒç—‡çŠ¶çš„ä¸¥é‡ç¨‹åº¦ï¼Œå¸®åŠ©è¯†åˆ«æŠ‘éƒæƒ…ç»ªçš„å€¾å‘ã€‚</p>
                    <div class="test-meta">
                        <span>20é¢˜</span>
                        <span>çº¦5åˆ†é’Ÿ</span>
                    </div>
                    <button class="start-test-button" onclick="startTest('sds')">å¼€å§‹æµ‹è¯•</button>
                </div>
                <div class="test-card">
                    <div class="test-icon">ğŸ˜°</div>
                    <h3>ç„¦è™‘è‡ªè¯„é‡è¡¨(SAS)</h3>
                    <p>è¯„ä¼°ç„¦è™‘ç—‡çŠ¶çš„ä¸¥é‡ç¨‹åº¦ï¼Œå¸®åŠ©è¯†åˆ«ç„¦è™‘æƒ…ç»ªçš„å€¾å‘ã€‚</p>
                    <div class="test-meta">
                        <span>20é¢˜</span>
                        <span>çº¦5åˆ†é’Ÿ</span>
                    </div>
                    <button class="start-test-button" onclick="startTest('sas')">å¼€å§‹æµ‹è¯•</button>
                </div>
                <div class="test-card">
                    <div class="test-icon">ğŸ’¤</div>
                    <h3>åŒ¹å…¹å ¡ç¡çœ è´¨é‡æŒ‡æ•°(PSQI)</h3>
                    <p>è¯„ä¼°è¿‡å»ä¸€ä¸ªæœˆçš„ç¡çœ è´¨é‡ï¼Œè¯†åˆ«ç¡çœ é—®é¢˜ã€‚</p>
                    <div class="test-meta">
                        <span>19é¢˜</span>
                        <span>çº¦8åˆ†é’Ÿ</span>
                    </div>
                    <button class="start-test-button" onclick="startTest('psqi')">å¼€å§‹æµ‹è¯•</button>
                </div>
            </div>

            <!-- æµ‹è¯•ç•Œé¢ -->
            <div class="test-container" id="test-container">
                <div class="test-header">
                    <h2 id="test-title">å¿ƒç†æµ‹è¯•</h2>
                    <p id="test-description">è¯·æ ¹æ®æ‚¨çš„å®é™…æƒ…å†µé€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹</p>
                </div>
                
                <div class="question-progress" id="question-progress">
                    ç¬¬ 1 é¢˜ï¼Œå…± 20 é¢˜
                </div>
                
                <div class="question-container">
                    <div class="question-text" id="question-text">
                        æˆ‘æ„Ÿåˆ°æƒ…ç»ªæ²®ä¸§ï¼Œéƒé—·ã€‚
                    </div>
                    
                    <div class="options-container" id="options-container">
                        <div class="option" data-value="1">
                            <strong>A.</strong> æ²¡æœ‰æˆ–å¾ˆå°‘æ—¶é—´
                        </div>
                        <div class="option" data-value="2">
                            <strong>B.</strong> å°éƒ¨åˆ†æ—¶é—´
                        </div>
                        <div class="option" data-value="3">
                            <strong>C.</strong> ç›¸å½“å¤šæ—¶é—´
                        </div>
                        <div class="option" data-value="4">
                            <strong>D.</strong> ç»å¤§éƒ¨åˆ†æˆ–å…¨éƒ¨æ—¶é—´
                        </div>
                    </div>
                </div>
                
                <div class="navigation-buttons">
                    <button class="nav-button" onclick="previousQuestion()" id="prev-button" disabled>ä¸Šä¸€é¢˜</button>
                    <button class="nav-button next" onclick="nextQuestion()" id="next-button">ä¸‹ä¸€é¢˜</button>
                </div>
            </div>

            <!-- ç»“æœç•Œé¢ -->
            <div class="results-container" id="results-container">
                <div class="results-header">
                    <h2>æµ‹è¯•ç»“æœ</h2>
                    <p>æŠ‘éƒè‡ªè¯„é‡è¡¨(SDS)</p>
                </div>
                
                <div class="score" id="score">53</div>
                
                <h3>æ‚¨çš„æŠ‘éƒæ°´å¹³ä¸ºè½»åº¦</h3>
                
                <div class="interpretation">
                    <h3>ç»“æœè§£é‡Š</h3>
                    <p>æ ¹æ®æ‚¨çš„æµ‹è¯•ç»“æœï¼Œæ‚¨ç›®å‰çš„æŠ‘éƒæ°´å¹³å¤„äºè½»åº¦èŒƒå›´ã€‚è¿™è¡¨æ˜æ‚¨å¯èƒ½å¶å°”ä¼šæ„Ÿåˆ°æƒ…ç»ªä½è½æˆ–å¤±å»å…´è¶£ï¼Œä½†è¿™äº›æ„Ÿå—å°šæœªä¸¥é‡å½±å“æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»å’ŒåŠŸèƒ½ã€‚</p>
                    <p>è½»åº¦æŠ‘éƒæ˜¯å¸¸è§çš„æƒ…ç»ªçŠ¶æ€ï¼Œå¯èƒ½ç”±ç”Ÿæ´»å‹åŠ›ã€äººé™…å…³ç³»é—®é¢˜æˆ–èº«ä½“å¥åº·çŠ¶å†µå¼•èµ·ã€‚é‡è¦çš„æ˜¯è¦å…³æ³¨è¿™äº›æ„Ÿå—ï¼Œå¹¶é‡‡å–ç§¯æçš„åº”å¯¹æªæ–½ã€‚</p>
                </div>
                
                <div class="recommendations">
                    <h3>å»ºè®®</h3>
                    <ul>
                        <li>ä¿æŒè§„å¾‹çš„ä½œæ¯æ—¶é—´ï¼Œç¡®ä¿å……è¶³ç¡çœ </li>
                        <li>å¢åŠ ä½“è‚²é”»ç‚¼ï¼Œå¦‚æ•£æ­¥ã€æ…¢è·‘æˆ–ç‘œä¼½</li>
                        <li>ä¸äº²æœ‹å¥½å‹åˆ†äº«æ„Ÿå—ï¼Œå¯»æ±‚ç¤¾ä¼šæ”¯æŒ</li>
                        <li>å°è¯•æ”¾æ¾æŠ€å·§ï¼Œå¦‚æ·±å‘¼å¸æˆ–å†¥æƒ³</li>
                        <li>å¦‚æœç—‡çŠ¶æŒç»­æˆ–åŠ é‡ï¼Œè¯·è€ƒè™‘å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢</li>
                    </ul>
                </div>
                
                <button class="start-test-button" onclick="retakeTest()" style="margin-top: 30px;">é‡æ–°æµ‹è¯•</button>
            </div>
        </div>
    </section>

    <!-- åº•éƒ¨ -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>å¿ƒçµä¼´ä¾£</h3>
                    <p>æ‚¨çš„ä¸“å±AIå¿ƒç†å’¨è¯¢å¸ˆï¼Œ24å°æ—¶åœ¨çº¿é™ªä¼´ï¼Œä¿æŠ¤éšç§ï¼Œä¸“ä¸šæ”¯æŒã€‚</p>
                </div>
                <div class="footer-column">
                    <h3>åŠŸèƒ½</h3>
                    <ul>
                        <li><a href="#">AIå¿ƒç†èŠå¤©</a></li>
                        <li><a href="#">æƒ…ç»ªè¿½è¸ª</a></li>
                        <li><a href="#">è®¤çŸ¥é‡æ„</a></li>
                        <li><a href="#">å†¥æƒ³ç»ƒä¹ </a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>èµ„æº</h3>
                    <ul>
                        <li><a href="#">å¿ƒç†æµ‹è¯•</a></li>
                        <li><a href="#">çŸ¥è¯†åº“</a></li>
                        <li><a href="#">æƒ…ç»ªè¿½è¸ª</a></li>
                        <li><a href="#">å¿ƒç†æµ‹è¯•</a></li>
                        <li><a href="#">å†¥æƒ³ç»ƒä¹ </a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>æ”¯æŒ</h3>
                    <ul>
                        <li><a href="#">å¸®åŠ©ä¸­å¿ƒ</a></li>
                        <li><a href="#">éšç§æ”¿ç­–</a></li>
                        <li><a href="#">æœåŠ¡æ¡æ¬¾</a></li>
                        <li><a href="#">è”ç³»æˆ‘ä»¬</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 å¿ƒçµä¼´ä¾£. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
            </div>
        </div>
    </footer>

    <script>
        // æµ‹è¯•æ•°æ®
        const tests = {
            sds: {
                title: "æŠ‘éƒè‡ªè¯„é‡è¡¨(SDS)",
                description: "è¯·æ ¹æ®æ‚¨è¿‡å»ä¸€å‘¨çš„å®é™…æ„Ÿå—é€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹",
                questions: [
                    "æˆ‘æ„Ÿåˆ°æƒ…ç»ªæ²®ä¸§ï¼Œéƒé—·ã€‚",
                    "æˆ‘æ„Ÿåˆ°æ—©æ™¨å¿ƒæƒ…æœ€å¥½ã€‚",
                    "æˆ‘è¦å“­æˆ–æƒ³å“­ã€‚",
                    "æˆ‘å¤œé—´ç¡çœ ä¸å¥½ã€‚",
                    "æˆ‘åƒé¥­åƒå¹³æ—¶ä¸€æ ·å¤šã€‚",
                    "æˆ‘çš„æ€§åŠŸèƒ½æ­£å¸¸ã€‚",
                    "æˆ‘æ„Ÿåˆ°ä½“é‡å‡è½»ã€‚",
                    "æˆ‘ä¸ºä¾¿ç§˜çƒ¦æ¼ã€‚",
                    "æˆ‘çš„å¿ƒè·³æ¯”å¹³æ—¶å¿«ã€‚",
                    "æˆ‘æ— æ•…æ„Ÿåˆ°ç–²åŠ³ã€‚",
                    "æˆ‘çš„å¤´è„‘åƒå¾€å¸¸ä¸€æ ·æ¸…æ¥šã€‚",
                    "æˆ‘åšäº‹æƒ…åƒå¹³æ—¶ä¸€æ ·ä¸æ„Ÿåˆ°å›°éš¾ã€‚",
                    "æˆ‘åå§ä¸å®‰ï¼Œéš¾ä»¥ä¿æŒå¹³é™ã€‚",
                    "æˆ‘å¯¹æœªæ¥æ„Ÿåˆ°æœ‰å¸Œæœ›ã€‚",
                    "æˆ‘æ¯”å¹³æ—¶æ›´å®¹æ˜“æ¿€æ€’ã€‚",
                    "æˆ‘è§‰å¾—å†³å®šä»€ä¹ˆäº‹å¾ˆå®¹æ˜“ã€‚",
                    "æˆ‘æ„Ÿè§‰è‡ªå·±æ˜¯æœ‰ç”¨å’Œä¸å¯ç¼ºå°‘çš„äººã€‚",
                    "æˆ‘çš„ç”Ÿæ´»å¾ˆæœ‰æ„ä¹‰ã€‚",
                    "å‡è‹¥æˆ‘æ­»äº†ï¼Œåˆ«äººä¼šè¿‡å¾—æ›´å¥½ã€‚",
                    "æˆ‘ä»ç„¶å–œçˆ±è‡ªå·±å¹³æ—¶å–œçˆ±çš„ä¸œè¥¿ã€‚"
                ],
                options: [
                    "æ²¡æœ‰æˆ–å¾ˆå°‘æ—¶é—´",
                    "å°éƒ¨åˆ†æ—¶é—´",
                    "ç›¸å½“å¤šæ—¶é—´",
                    "ç»å¤§éƒ¨åˆ†æˆ–å…¨éƒ¨æ—¶é—´"
                ]
            },
            sas: {
                title: "ç„¦è™‘è‡ªè¯„é‡è¡¨(SAS)",
                description: "è¯·æ ¹æ®æ‚¨è¿‡å»ä¸€å‘¨çš„å®é™…æ„Ÿå—é€‰æ‹©æœ€ç¬¦åˆçš„é€‰é¡¹",
                questions: [
                    "æˆ‘è§‰å¾—æ¯”å¹³æ—¶å®¹æ˜“ç´§å¼ å’Œç€æ€¥ã€‚",
                    "æˆ‘æ— ç¼˜æ— æ•…åœ°æ„Ÿåˆ°å®³æ€•ã€‚",
                    "æˆ‘å®¹æ˜“å¿ƒé‡Œçƒ¦ä¹±æˆ–è§‰å¾—æƒŠæã€‚",
                    "æˆ‘è§‰å¾—æˆ‘å¯èƒ½å°†è¦å‘ç–¯ã€‚",
                    "æˆ‘è§‰å¾—ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿä»€ä¹ˆä¸å¹¸ã€‚",
                    "æˆ‘æ‰‹è„šå‘æŠ–æ‰“é¢¤ã€‚",
                    "æˆ‘å› ä¸ºå¤´ç–¼ã€é¢ˆç—›å’ŒèƒŒç—›è€Œè‹¦æ¼ã€‚",
                    "æˆ‘æ„Ÿåˆ°å®¹æ˜“è¡°å¼±å’Œç–²ä¹ã€‚",
                    "æˆ‘è§‰å¾—å¿ƒå¹³æ°”å’Œï¼Œå¹¶ä¸”å®¹æ˜“å®‰é™åç€ã€‚",
                    "æˆ‘è§‰å¾—å¿ƒè·³å¾—å¾ˆå¿«ã€‚",
                    "æˆ‘å› ä¸ºä¸€é˜µé˜µå¤´æ™•è€Œè‹¦æ¼ã€‚",
                    "æˆ‘æœ‰æ™•å€’å‘ä½œï¼Œæˆ–è§‰å¾—è¦æ™•å€’ä¼¼çš„ã€‚",
                    "æˆ‘å¸æ°”å‘¼æ°”éƒ½æ„Ÿåˆ°å¾ˆå®¹æ˜“ã€‚",
                    "æˆ‘çš„æ‰‹è„šéº»æœ¨å’Œåˆºç—›ã€‚",
                    "æˆ‘å› ä¸ºèƒƒç—›å’Œæ¶ˆåŒ–ä¸è‰¯è€Œè‹¦æ¼ã€‚",
                    "æˆ‘å¸¸å¸¸è¦å°ä¾¿ã€‚",
                    "æˆ‘çš„æ‰‹è„šå¸¸å¸¸æ˜¯å¹²ç‡¥æ¸©æš–çš„ã€‚",
                    "æˆ‘è„¸çº¢å‘çƒ­ã€‚",
                    "æˆ‘å®¹æ˜“å…¥ç¡å¹¶ä¸”ä¸€å¤œç¡å¾—å¾ˆå¥½ã€‚",
                    "æˆ‘åšæ¶æ¢¦ã€‚"
                ],
                options: [
                    "æ²¡æœ‰æˆ–å¾ˆå°‘æ—¶é—´",
                    "å°éƒ¨åˆ†æ—¶é—´",
                    "ç›¸å½“å¤šæ—¶é—´",
                    "ç»å¤§éƒ¨åˆ†æˆ–å…¨éƒ¨æ—¶é—´"
                ]
            }
        };
        
        // å½“å‰æµ‹è¯•çŠ¶æ€
        let currentTest = null;
        let currentQuestionIndex = 0;
        let answers = [];
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
            checkUserStatus();
        });
        
        // å¼€å§‹æµ‹è¯•
        function startTest(testId) {
            currentTest = tests[testId];
            currentQuestionIndex = 0;
            answers = new Array(currentTest.questions.length).fill(null);
            
            // æ˜¾ç¤ºæµ‹è¯•ç•Œé¢
            document.querySelector('.tests-grid').style.display = 'none';
            document.getElementById('test-container').style.display = 'block';
            
            // æ›´æ–°æµ‹è¯•ä¿¡æ¯
            document.getElementById('test-title').textContent = currentTest.title;
            document.getElementById('test-description').textContent = currentTest.description;
            
            // æ˜¾ç¤ºç¬¬ä¸€é¢˜
            showQuestion();
        }
        
        // æ˜¾ç¤ºé¢˜ç›®
        function showQuestion() {
            const questionText = currentTest.questions[currentQuestionIndex];
            document.getElementById('question-text').textContent = questionText;
            
            // æ›´æ–°è¿›åº¦
            document.getElementById('question-progress').textContent = 
                `ç¬¬ ${currentQuestionIndex + 1} é¢˜ï¼Œå…± ${currentTest.questions.length} é¢˜`;
            
            // æ›´æ–°é€‰é¡¹
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            currentTest.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (answers[currentQuestionIndex] === index + 1) {
                    optionElement.classList.add('selected');
                }
                optionElement.setAttribute('data-value', index + 1);
                optionElement.innerHTML = `<strong>${String.fromCharCode(65 + index)}.</strong> ${option}`;
                optionElement.addEventListener('click', function() {
                    selectOption(this);
                });
                optionsContainer.appendChild(optionElement);
            });
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('prev-button').disabled = currentQuestionIndex === 0;
            document.getElementById('next-button').textContent = 
                currentQuestionIndex === currentTest.questions.length - 1 ? 'æäº¤' : 'ä¸‹ä¸€é¢˜';
        }
        
        // é€‰æ‹©é€‰é¡¹
        function selectOption(optionElement) {
            // æ¸…é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // è®¾ç½®å½“å‰é€‰é¡¹ä¸ºé€‰ä¸­çŠ¶æ€
            optionElement.classList.add('selected');
            
            // ä¿å­˜ç­”æ¡ˆ
            answers[currentQuestionIndex] = parseInt(optionElement.getAttribute('data-value'));
        }
        
        // ä¸Šä¸€é¢˜
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }
        
        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            // æ£€æŸ¥æ˜¯å¦å·²é€‰æ‹©ç­”æ¡ˆ
            if (answers[currentQuestionIndex] === null) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªç­”æ¡ˆ');
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯æœ€åä¸€é¢˜
            if (currentQuestionIndex === currentTest.questions.length - 1) {
                // æäº¤æµ‹è¯•
                submitTest();
            } else {
                // ä¸‹ä¸€é¢˜
                currentQuestionIndex++;
                showQuestion();
            }
        }
        
        // æäº¤æµ‹è¯•
        function submitTest() {
            // è®¡ç®—å¾—åˆ†ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
            const score = answers.reduce((sum, answer) => sum + (answer || 0), 0);
            const maxScore = currentTest.questions.length * 4;
            const percentage = Math.round((score / maxScore) * 100);
            
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('test-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'block';
            document.querySelector('.results-header h2').textContent = `æµ‹è¯•ç»“æœ - ${currentTest.title}`;
            document.querySelector('.results-header p').textContent = currentTest.title;
            document.getElementById('score').textContent = percentage;
            
            // æ ¹æ®å¾—åˆ†è®¾ç½®ç»“æœæ–‡æœ¬
            let resultText = '';
            if (percentage < 50) {
                resultText = 'æ­£å¸¸èŒƒå›´';
            } else if (percentage < 60) {
                resultText = 'è½»åº¦';
            } else if (percentage < 70) {
                resultText = 'ä¸­åº¦';
            } else {
                resultText = 'é‡åº¦';
            }
            
            document.querySelector('.results-container h3').textContent = `æ‚¨çš„${currentTest.title.includes('æŠ‘éƒ') ? 'æŠ‘éƒ' : 'ç„¦è™‘'}æ°´å¹³ä¸º${resultText}`;
        }
        
        // é‡æ–°æµ‹è¯•
        function retakeTest() {
            document.getElementById('results-container').style.display = 'none';
            document.querySelector('.tests-grid').style.display = 'grid';
        }
        
        // æ£€æŸ¥ç”¨æˆ·çŠ¶æ€å¹¶æ›´æ–°UI
        function checkUserStatus() {
            try {
                const token = localStorage.getItem('token');
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                const userProfile = JSON.parse(localStorage.getItem('userProfile') || '{}');
                
                const userInfo = document.getElementById('user-info');
                const authButton = document.getElementById('auth-button');
                const userName = document.getElementById('user-name');
                const userButton = document.getElementById('user-button');
                const profileNickname = document.getElementById('profile-nickname');
                const profileGender = document.getElementById('profile-gender');
                const profileZodiac = document.getElementById('profile-zodiac');
                
                if (token && user) {
                    // ç”¨æˆ·å·²ç™»å½•
                    if (userInfo) userInfo.style.display = 'block';
                    if (authButton) authButton.style.display = 'none';
                    if (userName) userName.textContent = user.username;
                    
                    // è®¾ç½®ç”¨æˆ·æŒ‰é’®æ˜¾ç¤ºé¦–å­—æ¯
                    if (userButton) {
                        userButton.textContent = user.username.charAt(0).toUpperCase();
                    }
                    
                    // æ˜¾ç¤ºç”¨æˆ·ä¸ªäººä¿¡æ¯
                    if (profileNickname) {
                        profileNickname.textContent = userProfile.nickname || '';
                    }
                    
                    if (profileGender) {
                        const genderText = userProfile.gender === 'female' ? 'å¥³' : 
                                         userProfile.gender === 'male' ? 'ç”·' : '';
                        profileGender.textContent = genderText ? ` ${genderText}` : '';
                    }
                    
                    if (profileZodiac) {
                        profileZodiac.textContent = userProfile.zodiac ? ` ${userProfile.zodiac}` : '';
                    }
                } else {
                    // ç”¨æˆ·æœªç™»å½•
                    if (userInfo) userInfo.style.display = 'none';
                    if (authButton) authButton.style.display = 'block';
                }
            } catch (error) {
                console.error('Error checking user status:', error);
            }
        }
        
        // ç»‘å®šç”¨æˆ·èœå•äº‹ä»¶
        function bindUserMenuEvents() {
            try {
                const userButton = document.getElementById('user-button');
                const userMenu = document.getElementById('user-menu');
                const logoutBtn = document.getElementById('logout-btn');
                const profileBtn = document.getElementById('profile-btn');
                
                if (userButton) {
                    userButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        if (userMenu) {
                            userMenu.classList.toggle('show');
                        }
                    });
                }
                
                if (profileBtn) {
                    profileBtn.addEventListener('click', function() {
                        window.location.href = 'profile.html';
                    });
                }
                
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', function() {
                        // æ¸…é™¤ç”¨æˆ·ä¿¡æ¯
                        localStorage.removeItem('token');
                        localStorage.removeItem('user');
                        localStorage.removeItem('userProfile');
                        
                        // éšè—ç”¨æˆ·èœå•
                        if (userMenu) userMenu.classList.remove('show');
                        
                        // éšè—ç”¨æˆ·ä¿¡æ¯æŒ‰é’®ï¼Œæ˜¾ç¤ºç™»å½•æŒ‰é’®
                        const userInfo = document.getElementById('user-info');
                        const authButton = document.getElementById('auth-button');
                        const userButton = document.getElementById('user-button');
                        if (userInfo) userInfo.style.display = 'none';
                        if (authButton) authButton.style.display = 'block';
                        if (userButton) userButton.textContent = 'U'; // é‡ç½®ä¸ºé»˜è®¤å€¼
                        
                        alert('å·²æˆåŠŸç™»å‡º');
                    });
                }
                
                // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹éšè—èœå•
                document.addEventListener('click', function(e) {
                    if (userMenu && !userMenu.contains(e.target) && userButton !== e.target) {
                        userMenu.classList.remove('show');
                    }
                });
            } catch (error) {
                console.error('Error binding user menu events:', error);
            }
        }
        
        // è·³è½¬åˆ°èŠå¤©åŠŸèƒ½
        function goToChat() {
            try {
                const token = localStorage.getItem('token');
                if (token) {
                    // å·²ç™»å½•ç”¨æˆ·è·³è½¬åˆ°é¦–é¡µçš„èŠå¤©ç•Œé¢
                    window.location.href = 'index.html#chat';
                } else {
                    // æœªç™»å½•ç”¨æˆ·æ˜¾ç¤ºç™»å½•æ¨¡æ€æ¡†
                    alert('è¯·å…ˆç™»å½•');
                    window.location.href = 'index.html';
                }
            } catch (error) {
                console.error('Error in goToChat:', error);
            }
        }
    </script>
</body>
</html>